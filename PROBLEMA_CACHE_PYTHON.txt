================================================================
            PROBLEMA: CACHE DO PYTHON (.pyc)
================================================================

PROBLEMA IDENTIFICADO:
----------------------
O codigo esta CORRETO, mas o erro ainda aparece:
[WARN] Client.__init__() got an unexpected keyword argument 'proxies'

CAUSA:
------
Python esta usando arquivos .pyc ANTIGOS em cache!

Quando voce executa um arquivo .py, o Python cria arquivos .pyc
(bytecode compilado) na pasta __pycache__ para executar mais rapido.

Se voce substituiu os arquivos .py mas nao limpou o cache,
o Python continua usando o codigo ANTIGO!


================================================================
                    SOLUCAO RAPIDA
================================================================

OPCAO 1 - Usar o script automatico (RECOMENDADO):
--------------------------------------------------
De duplo clique em: LIMPAR_CACHE_E_INICIAR.bat

O script vai:
1. Parar qualquer servidor rodando
2. Limpar __pycache__
3. Remover arquivos .pyc
4. Limpar cache do pip
5. Iniciar servidor SEM cache


OPCAO 2 - Limpar manualmente:
------------------------------
1. Pare o servidor (CTRL+C)

2. Delete a pasta __pycache__:
   rmdir /S /Q __pycache__

3. Delete arquivos .pyc:
   del /S /Q *.pyc

4. Inicie o servidor SEM cache:
   python -B api_server.py
   
   O parametro -B desabilita a criacao de .pyc


OPCAO 3 - Limpar tudo e reinstalar:
------------------------------------
1. Pare o servidor

2. Limpe cache:
   rmdir /S /Q __pycache__
   del /S /Q *.pyc

3. Reinstale OpenAI:
   pip uninstall openai -y
   pip cache purge
   pip install openai>=1.0.0

4. Inicie o servidor:
   python api_server.py


================================================================
                    VERIFICAR SE FUNCIONOU
================================================================

Ao iniciar o servidor, voce DEVE ver:

âœ… Arquivo .env carregado com sucesso
[INFO] IA OpenAI inicializada com sucesso  â† ISSO!
[INFO] Base de conhecimento carregada: 6 conselhos


E NAO MAIS:

âŒ [WARN] Falha ao configurar OpenAI: got an unexpected keyword argument 'proxies'
âŒ [WARN] Erro ao inicializar OpenAI: got an unexpected keyword argument 'proxies'


================================================================
                    POR QUE ISSO ACONTECE?
================================================================

Fluxo normal:
1. Voce executa: python api_server.py
2. Python compila api_server.py -> api_server.pyc
3. Python salva .pyc em __pycache__/
4. Proxima execucao usa o .pyc (mais rapido)

Problema quando voce substitui arquivos:
1. Voce substitui ia_engine_openai_padrao.py (NOVO)
2. Mas __pycache__/ia_engine_openai_padrao.pyc e ANTIGO
3. Python usa o .pyc ANTIGO
4. Erro persiste mesmo com codigo correto!

Solucao:
- Deletar __pycache__/ e .pyc
- Ou usar python -B (desabilita cache)


================================================================
                    COMANDOS UTEIS
================================================================

Iniciar SEM criar cache:
python -B api_server.py

Limpar cache manualmente:
rmdir /S /Q __pycache__
del /S /Q *.pyc

Verificar se ha cache:
dir __pycache__

Ver conteudo do cache:
dir __pycache__ /B

Forcar recompilacao:
python -m compileall -f .


================================================================
                    PREVENCAO
================================================================

Para evitar este problema no futuro:

OPCAO 1 - Sempre usar python -B:
---------------------------------
python -B api_server.py

Isso desabilita a criacao de .pyc


OPCAO 2 - Configurar variavel de ambiente:
-------------------------------------------
set PYTHONDONTWRITEBYTECODE=1
python api_server.py

Isso tambem desabilita .pyc


OPCAO 3 - Limpar cache ao substituir arquivos:
-----------------------------------------------
Sempre que substituir arquivos .py, execute:
rmdir /S /Q __pycache__


================================================================
                    RESUMO
================================================================

PROBLEMA:
Cache Python (.pyc) com codigo antigo

SOLUCAO RAPIDA:
1. Execute: LIMPAR_CACHE_E_INICIAR.bat
   OU
2. rmdir /S /Q __pycache__
   python -B api_server.py

VERIFICACAO:
Deve aparecer: [INFO] IA OpenAI inicializada com sucesso

PREVENCAO:
Sempre use: python -B api_server.py


PRONTO! Problema resolvido! ðŸš€

================================================================

